SimpleCnn(
  (conv1): Conv2d(28, 16, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
  (conv2): Conv2d(16, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
  (pool): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
  (fc1): Linear(in_features=1568, out_features=128, bias=True)
  (fc2): Linear(in_features=128, out_features=10, bias=True)
)
cuda is not avaiable.
==================================================
Algorithm: FedAvg
Local batch size: 10
Local epochs: 1
Local learing rate: 0.005
Local learing rate decay: False
Total number of clients: 20
Clients join in each round: 1.0
Clients randomly join: False
Client drop rate: 0.0
Client select regarding time: False
Running times: 1
Dataset: BloodMNIST
Number of classes: 10
Backbone: resnet18
Using device: cpu
Using DP: False
Auto break: False
Global rounds: 100
DLG attack: False
Total number of new clients: 0
Fine tuning epoches on new clients: 0
==================================================
============= Running time: 0th =============
Creating server and clients ...
x(
  (conv1): Conv2d(28, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
  (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
  (layer1): Sequential(
    (0): a(
      (conv1): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential()
    )
    (1): a(
      (conv1): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential()
    )
  )
  (layer2): Sequential(
    (0): a(
      (conv1): Conv2d(64, 128, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential(
        (0): Conv2d(64, 128, kernel_size=(1, 1), stride=(2, 2), bias=False)
        (1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      )
    )
    (1): a(
      (conv1): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential()
    )
  )
  (layer3): Sequential(
    (0): a(
      (conv1): Conv2d(128, 256, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential(
        (0): Conv2d(128, 256, kernel_size=(1, 1), stride=(2, 2), bias=False)
        (1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      )
    )
    (1): a(
      (conv1): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential()
    )
  )
  (layer4): Sequential(
    (0): a(
      (conv1): Conv2d(256, 512, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential(
        (0): Conv2d(256, 512, kernel_size=(1, 1), stride=(2, 2), bias=False)
        (1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      )
    )
    (1): a(
      (conv1): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)
      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)
      (shortcut): Sequential()
    )
  )
  (avgpool): AdaptiveAvgPool2d(output_size=(1, 1))
  (linear): Linear(in_features=512, out_features=10, bias=True)
  (fc): Linear(in_features=10, out_features=10, bias=True)
)
Join ratio / total clients: 1.0 / 20
Finished creating server and clients.
Dropped clients: [6, 19, 13, 1, 4, 18, 17, 2, 16, 12]
drop classif com
-------------Round number: 0-------------
Evaluate global model
Averaged Train Loss: 2.2691
Averaged Test Accurancy: 0.0703
Averaged Test AUC: 0.5693
Std Test Accurancy: 0.0527
Std Test AUC: 0.0483
clients: 10
Training client: 0, Time Cost: 2.9006412029266357, Train Accuracy: 22.69%
Training client: 3, Time Cost: 3.341127634048462, Train Accuracy: 43.87%
Training client: 5, Time Cost: 1.4162039756774902, Train Accuracy: 26.15%
Training client: 7, Time Cost: 3.117480993270874, Train Accuracy: 22.50%
Training client: 8, Time Cost: 3.229069232940674, Train Accuracy: 24.67%
Training client: 9, Time Cost: 2.597808837890625, Train Accuracy: 29.58%
Training client: 10, Time Cost: 4.043595314025879, Train Accuracy: 23.64%
Training client: 11, Time Cost: 4.021043062210083, Train Accuracy: 24.71%
Training client: 14, Time Cost: 3.5049829483032227, Train Accuracy: 26.13%
Training client: 15, Time Cost: 4.333102226257324, Train Accuracy: 42.56%
length of uploaded models 20
Dropped clients: [6, 14, 19, 2, 8, 18, 1, 16, 5, 12]
drop classif com
-------------Round number: 1-------------
Evaluate global model
Averaged Train Loss: 2.1335
Averaged Test Accurancy: 0.2545
Averaged Test AUC: 0.6995
Std Test Accurancy: 0.0667
Std Test AUC: 0.0504
clients: 10
Training client: 0, Time Cost: 2.9974420070648193, Train Accuracy: 72.31%
Training client: 3, Time Cost: 3.719282865524292, Train Accuracy: 60.00%
Training client: 4, Time Cost: 3.4791131019592285, Train Accuracy: 56.00%
Training client: 7, Time Cost: 3.0825142860412598, Train Accuracy: 58.21%
Training client: 9, Time Cost: 2.7261250019073486, Train Accuracy: 71.67%
Training client: 10, Time Cost: 3.734215497970581, Train Accuracy: 76.36%
Training client: 11, Time Cost: 3.6786911487579346, Train Accuracy: 63.24%
Training client: 13, Time Cost: 3.9578652381896973, Train Accuracy: 54.72%
Training client: 15, Time Cost: 4.254477500915527, Train Accuracy: 62.56%
Training client: 17, Time Cost: 3.7939743995666504, Train Accuracy: 73.24%
length of uploaded models 20
Dropped clients: [19, 5, 2, 10, 3, 6, 18, 13, 15, 7]
drop classif com
-------------Round number: 2-------------
Evaluate global model
Averaged Train Loss: 1.4746
Averaged Test Accurancy: 0.4683
Averaged Test AUC: 0.8560
Std Test Accurancy: 0.1055
Std Test AUC: 0.0492
clients: 10
Training client: 0, Time Cost: 2.82855224609375, Train Accuracy: 54.62%
Training client: 1, Time Cost: 3.5474319458007812, Train Accuracy: 81.38%
Training client: 4, Time Cost: 3.883728504180908, Train Accuracy: 60.00%
Training client: 8, Time Cost: 3.5107078552246094, Train Accuracy: 49.00%
Training client: 9, Time Cost: 2.640268087387085, Train Accuracy: 71.67%
Training client: 11, Time Cost: 3.9181833267211914, Train Accuracy: 61.18%
Training client: 12, Time Cost: 3.3901824951171875, Train Accuracy: 62.26%
Training client: 14, Time Cost: 3.4994142055511475, Train Accuracy: 54.19%
Training client: 16, Time Cost: 3.331543207168579, Train Accuracy: 76.00%
Training client: 17, Time Cost: 3.800230026245117, Train Accuracy: 75.00%
length of uploaded models 20
Dropped clients: [10, 14, 8, 7, 16, 2, 11, 6, 19, 4]
drop classif com
-------------Round number: 3-------------
Evaluate global model
Averaged Train Loss: 1.3938
Averaged Test Accurancy: 0.5187
Averaged Test AUC: 0.8719
Std Test Accurancy: 0.1823
Std Test AUC: 0.0788
clients: 10
Training client: 0, Time Cost: 3.11436128616333, Train Accuracy: 79.23%
Training client: 1, Time Cost: 3.2883360385894775, Train Accuracy: 70.00%
Training client: 3, Time Cost: 3.364982843399048, Train Accuracy: 70.65%
Training client: 5, Time Cost: 1.4521467685699463, Train Accuracy: 48.46%
Training client: 9, Time Cost: 2.6670572757720947, Train Accuracy: 67.50%
Training client: 12, Time Cost: 3.4065823554992676, Train Accuracy: 69.03%
Training client: 13, Time Cost: 4.100157260894775, Train Accuracy: 73.33%
Training client: 15, Time Cost: 4.92353892326355, Train Accuracy: 69.74%
Training client: 17, Time Cost: 4.714052677154541, Train Accuracy: 50.88%
Training client: 18, Time Cost: 3.4150431156158447, Train Accuracy: 77.50%
length of uploaded models 20
Dropped clients: [11, 1, 3, 14, 19, 2, 4, 13, 6, 8]
drop classif com
-------------Round number: 4-------------
Evaluate global model
Averaged Train Loss: 1.0987
Averaged Test Accurancy: 0.5898
Averaged Test AUC: 0.9194
Std Test Accurancy: 0.1694
Std Test AUC: 0.0393
clients: 10
Training client: 0, Time Cost: 2.8662197589874268, Train Accuracy: 60.38%
Training client: 5, Time Cost: 1.4699287414550781, Train Accuracy: 56.92%
Training client: 7, Time Cost: 3.492701292037964, Train Accuracy: 64.29%
Training client: 9, Time Cost: 3.1898772716522217, Train Accuracy: 67.92%
Training client: 10, Time Cost: 4.655062675476074, Train Accuracy: 64.85%
Training client: 12, Time Cost: 4.38280177116394, Train Accuracy: 60.97%
Training client: 15, Time Cost: 5.584737539291382, Train Accuracy: 72.56%
Training client: 16, Time Cost: 3.459040880203247, Train Accuracy: 48.33%
Training client: 17, Time Cost: 4.42149543762207, Train Accuracy: 79.12%
Training client: 18, Time Cost: 3.0276079177856445, Train Accuracy: 73.33%
length of uploaded models 20
Batch 1 clients: [6, 1, 9, 4, 0, 3, 19, 7, 8, 18, 16, 5, 2]
Batch 2 clients: [10, 11, 12, 13, 14, 15, 17]
hello
Batch 1 clients: [6, 1, 9, 4, 0, 3, 19, 7, 8, 18, 16, 5, 2]
Batch 2 clients: [10, 11, 12, 13, 14, 15, 17]
Training round 1/127 for batch 6
Training round 1/75 for batch 10<class 'list'>
<class 'list'>.........................
 .........................6.5  3.5.........................
.........................
Training client: 14, Time Cost: 45.12600660324097, Train Accuracy: 68.39%
Training client: 17, Time Cost: 47.94569373130798, Train Accuracy: 39.71%
Training client: 11, Time Cost: 48.35342621803284, Train Accuracy: 72.94%
Training client: 7, Time Cost: 43.1676025390625, Train Accuracy: 67.14%
Training client: 1, Time Cost: 43.64439940452576, Train Accuracy: 74.48%
Training client: 13, Time Cost: 50.03631639480591, Train Accuracy: 69.44%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training client: 16, Time Cost: 44.584086894989014, Train Accuracy: 71.00%
Training client: 4, Time Cost: 44.69536733627319, Train Accuracy: 63.00%
Training client: 8, Time Cost: 44.7910213470459, Train Accuracy: 64.33%
Training client: 3, Time Cost: 45.27308392524719, Train Accuracy: 79.68%
Training round 2/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 2, Time Cost: 47.155766010284424, Train Accuracy: 64.17%
......................... leng of drop and ffrnd
6
6
length of uploaded models 20
Training round 2/127 for batch 6
<class 'list'>
......................... 6.5 .........................
Training client: 12, Time Cost: 34.955825328826904, Train Accuracy: 73.23%
Training client: 11, Time Cost: 38.20748853683472, Train Accuracy: 67.06%
Training client: 13, Time Cost: 40.16000294685364, Train Accuracy: 71.11%
Training client: 18, Time Cost: 31.045610666275024, Train Accuracy: 67.92%
Training client: 0, Time Cost: 31.88241481781006, Train Accuracy: 74.62%
Training client: 15, Time Cost: 41.9005560874939, Train Accuracy: 63.33%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training client: 7, Time Cost: 32.92723345756531, Train Accuracy: 80.71%
Training round 3/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 4, Time Cost: 33.82614350318909, Train Accuracy: 73.67%
Training client: 8, Time Cost: 34.39183807373047, Train Accuracy: 82.33%
Training client: 16, Time Cost: 34.55119729042053, Train Accuracy: 66.67%
Training client: 3, Time Cost: 34.90518665313721, Train Accuracy: 70.65%
......................... leng of drop and ffrnd
6
6
length of uploaded models 20
Training round 3/127 for batch 6
<class 'list'>
......................... 6.5 .........................
Training client: 12, Time Cost: 35.111738443374634, Train Accuracy: 20.97%
Training client: 11, Time Cost: 38.04936075210571, Train Accuracy: 26.18%
Training client: 18, Time Cost: 31.362379550933838, Train Accuracy: 38.33%
Training client: 13, Time Cost: 40.23331356048584, Train Accuracy: 26.67%
Training client: 7, Time Cost: 34.10770535469055, Train Accuracy: 22.86%
Training client: 1, Time Cost: 34.21961498260498, Train Accuracy: 32.41%
Training client: 15, Time Cost: 42.38223838806152, Train Accuracy: 23.85%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training client: 8, Time Cost: 35.30332088470459, Train Accuracy: 33.33%
Training round 4/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 3, Time Cost: 35.747223138809204, Train Accuracy: 29.03%
Training client: 2, Time Cost: 37.746469259262085, Train Accuracy: 27.22%
Training client: 10, Time Cost: 21.32101011276245, Train Accuracy: 18.48%
Training client: 17, Time Cost: 21.691041231155396, Train Accuracy: 26.18%
Training client: 11, Time Cost: 21.8177809715271, Train Accuracy: 26.18%
Training client: 13, Time Cost: 22.115389347076416, Train Accuracy: 27.22%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 5/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 12, Time Cost: 19.032498359680176, Train Accuracy: 41.29%
Training client: 14, Time Cost: 19.614763975143433, Train Accuracy: 49.35%
Training client: 11, Time Cost: 20.265980005264282, Train Accuracy: 55.00%
Training client: 15, Time Cost: 20.975003957748413, Train Accuracy: 53.33%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 6/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 10, Time Cost: 19.789132595062256, Train Accuracy: 64.85%
Training client: 17, Time Cost: 20.278531551361084, Train Accuracy: 41.76%
Training client: 11, Time Cost: 20.310245275497437, Train Accuracy: 55.29%
Training client: 15, Time Cost: 21.461210250854492, Train Accuracy: 54.62%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 7/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 14, Time Cost: 18.952460050582886, Train Accuracy: 60.00%
Training client: 10, Time Cost: 19.728800058364868, Train Accuracy: 63.33%
Training client: 13, Time Cost: 20.78491759300232, Train Accuracy: 40.00%
Training client: 15, Time Cost: 21.231472969055176, Train Accuracy: 58.72%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 8/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 14, Time Cost: 18.89681124687195, Train Accuracy: 57.74%
Training client: 17, Time Cost: 20.36905002593994, Train Accuracy: 55.00%
Training client: 11, Time Cost: 20.464879989624023, Train Accuracy: 62.65%
Training client: 13, Time Cost: 20.75637459754944, Train Accuracy: 42.22%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 9/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 12, Time Cost: 17.134390830993652, Train Accuracy: 55.48%
Training client: 14, Time Cost: 17.396517753601074, Train Accuracy: 51.29%
Training client: 10, Time Cost: 17.967971563339233, Train Accuracy: 48.48%
Training client: 13, Time Cost: 18.682120084762573, Train Accuracy: 55.56%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 10/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 17, Time Cost: 19.987828493118286, Train Accuracy: 59.71%
Training client: 11, Time Cost: 20.593475103378296, Train Accuracy: 61.47%
Training client: 13, Time Cost: 21.492005586624146, Train Accuracy: 52.50%
Training client: 15, Time Cost: 22.06027364730835, Train Accuracy: 53.85%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 11/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 12, Time Cost: 18.177179098129272, Train Accuracy: 54.84%
Training client: 11, Time Cost: 19.506986379623413, Train Accuracy: 62.35%
Training client: 13, Time Cost: 19.90676259994507, Train Accuracy: 38.61%
Training client: 15, Time Cost: 20.471912384033203, Train Accuracy: 46.41%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 12/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 14, Time Cost: 17.950857400894165, Train Accuracy: 53.23%
Training client: 12, Time Cost: 18.072246313095093, Train Accuracy: 51.29%
Training client: 17, Time Cost: 18.681268215179443, Train Accuracy: 58.53%
Training client: 13, Time Cost: 19.11635971069336, Train Accuracy: 51.39%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 13/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 14, Time Cost: 17.66283345222473, Train Accuracy: 57.74%
Training client: 10, Time Cost: 18.1542329788208, Train Accuracy: 68.79%
Training client: 17, Time Cost: 18.639029502868652, Train Accuracy: 60.88%
Training client: 13, Time Cost: 18.922635078430176, Train Accuracy: 53.61%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 14/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 12, Time Cost: 18.5583815574646, Train Accuracy: 51.94%
Training client: 10, Time Cost: 19.327566862106323, Train Accuracy: 47.27%
Training client: 13, Time Cost: 19.893367290496826, Train Accuracy: 54.17%
Training client: 15, Time Cost: 20.670920610427856, Train Accuracy: 32.31%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 15/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Training client: 12, Time Cost: 18.983694791793823, Train Accuracy: 36.45%
Training client: 11, Time Cost: 20.360710382461548, Train Accuracy: 52.65%
Training client: 13, Time Cost: 21.08147168159485, Train Accuracy: 34.44%
Training client: 15, Time Cost: 21.459049224853516, Train Accuracy: 55.64%
......................... leng of drop and ffrnd
3
3
length of uploaded models 20
Training round 16/75 for batch 10
<class 'list'>
......................... 3.5 .........................
Traceback (most recent call last):
  File "/home/student/R/fl/PFLlib/system/main.py", line 549, in <module>
    run(args)
  File "/home/student/R/fl/PFLlib/system/main.py", line 375, in run
    server.train()
  File "/home/student/R/fl/PFLlib/system/flcore/servers/serveravg.py", line 564, in train
    thread_batch1.join()
  File "/usr/lib/python3.9/threading.py", line 1060, in join
    self._wait_for_tstate_lock()
  File "/usr/lib/python3.9/threading.py", line 1080, in _wait_for_tstate_lock
    if lock.acquire(block, timeout):
KeyboardInterrupt
Exception ignored in: <module 'threading' from '/usr/lib/python3.9/threading.py'>
Traceback (most recent call last):
  File "/usr/lib/python3.9/threading.py", line 1477, in _shutdown
    lock.acquire()
KeyboardInterrupt: